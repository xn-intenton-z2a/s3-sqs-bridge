<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>agentic-lib</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; background-color: #f9f9f9; color: #333; }
    header { padding-bottom: 1em; border-bottom: 2px solid #ccc; margin-bottom: 1em; }
    h1 { font-size: 2em; }
    section { margin-bottom: 1.5em; }
    ul { list-style: none; padding: 0; }
    li { margin: 0.5em 0; }
    .label { font-weight: bold; }
    footer { margin-top: 2em; font-size: 0.9em; color: #777; }
    a { color: #0366d6; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <header>
    <h1>agentic-lib</h1>
    <p><a href="https://github.com/xn-intenton-z2a/agentic-lib">repository</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/latest.html">latest stats</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/all.html">all stats</a></p>
  </header>
  <section>
    <h1 class="md-github"><a class="md-github__anchor" name="express_middleware" href="#express_middleware"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>EXPRESS_MIDDLEWARE</h1>
<h2 class="md-github"><a class="md-github__anchor" name="crawl-summary" href="#crawl-summary"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Crawl Summary</h2>
<p class="md-github">Middleware signature: (req, res, next) =&gt; void. Types: application-level (app.use, app.METHOD), router-level (router.use, router.METHOD), error-handling (err, req, res, next), built-in (express.static, express.json, express.urlencoded), third-party (e.g., cookie-parser). Register app-level: app.use([path], ...handlers), app.METHOD(path, ...handlers). Register router-level: const router=express.Router(); router.use([path],...); router.METHOD([path],...). Skip route middleware: next('route') only inside app.METHOD or router.METHOD handlers. Skip entire router: next('router'). Error handlers require four args. express.static(root, options) serves static files; mount multiple in order; mount path prefix via app.use('/static',express.static(path)). express.json([options]) and express.urlencoded([options]) parse payloads. Install third-party: npm install, then app.use(middleware()).</p>
<h2 class="md-github"><a class="md-github__anchor" name="normalised-extract" href="#normalised-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Normalised Extract</h2>
<p class="md-github">Table of Contents</p>
<ol class="md-github">
<li class="md-github">
<p class="md-github">Middleware function signature</p>
</li>
<li class="md-github">
<p class="md-github">Types of middleware</p>
</li>
<li class="md-github">
<p class="md-github">Application-level registration</p>
</li>
<li class="md-github">
<p class="md-github">Router-level registration</p>
</li>
<li class="md-github">
<p class="md-github">Skipping handlers: next('route') and next('router')</p>
</li>
<li class="md-github">
<p class="md-github">Error-handling middleware</p>
</li>
<li class="md-github">
<p class="md-github">Built-in middleware functions</p>
</li>
<li class="md-github">
<p class="md-github">Third-party middleware loading</p>
</li>
<li class="md-github">
<p class="md-github">Middleware function signature
(req, res, next) =&gt; void  Access req, res; call next() unless ending response</p>
</li>
<li class="md-github">
<p class="md-github">Types of middleware
• Application-level
• Router-level
• Error-handling
• Built-in
• Third-party</p>
</li>
<li class="md-github">
<p class="md-github">Application-level registration
app.use([mountPath], handler1, handler2, ...)
app.METHOD(mountPath, handler1, handler2, ...)
Handlers execute in order; omit mountPath for all requests</p>
</li>
<li class="md-github">
<p class="md-github">Router-level registration
const router = express.Router()
router.use([mountPath], handler...)
router.METHOD(mountPath, handler...)
app.use(basePath, router)</p>
</li>
<li class="md-github">
<p class="md-github">Skipping handlers
In METHOD handlers use next('route') to skip remaining in-stack handlers and jump to next route definition
In router middleware use next('router') to exit router and continue in parent app stack</p>
</li>
<li class="md-github">
<p class="md-github">Error-handling middleware
Signature: (err, req, res, next) =&gt; void
Must specify four parameters to be recognized
Place after all other middleware and routes</p>
</li>
<li class="md-github">
<p class="md-github">Built-in middleware functions
express.static(root, [options])
express.json([options])
express.urlencoded([options])
Mount via app.use(…)</p>
</li>
<li class="md-github">
<p class="md-github">Third-party middleware loading
Install: npm install module-name
Load: const mod = require('module-name')
Register: app.use(mod([options]))</p>
</li>
</ol>
<h2 class="md-github"><a class="md-github__anchor" name="supplementary-details" href="#supplementary-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supplementary Details</h2>
<p class="md-github">• express.static options: maxAge default 0; set etag true; extensions []; index 'index.html'• For safe static serving use absolute path: const path = require('path'); app.use('/static', express.static(path.join(__dirname,'public')))• Load multiple static dirs in sequence: app.use(express.static('public')); app.use(express.static('files'))• express.json options: inflate true; limit '100kb'; type 'application/json'; verify undefined• express.urlencoded options: extended false; inflate true; limit '100kb'; parameterLimit 1000; type 'application/x-www-form-urlencoded'• Best practice: register JSON and URL-encoded parsers before routes that consume req.body• Always place error handler last: app.use((err,req,res,next)=&gt;{})• Use router-level middleware to group related routes and isolate error handling• Avoid hanging requests: every middleware must call next() or terminate response• Order matters: first-match routing; avoid duplicate GET handlers that send responses• Use mount paths to scope middleware to subsets of routes</p>
<h2 class="md-github"><a class="md-github__anchor" name="reference-details" href="#reference-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reference Details</h2>
<p class="md-github">Application methods
• app.use(path?: string|RegExp, ...handlers: RequestHandler[]): Express.Application
• app.METHOD(path: string, ...handlers: RequestHandler[]): Express.Application  METHODS: get, post, put, delete, patch, all, options, head</p>
<p class="md-github">Router methods
• router.use(path?: string|RegExp, ...handlers: RequestHandler[]): Router
• router.METHOD(path: string, ...handlers: RequestHandler[]): Router</p>
<p class="md-github">Middleware signatures
• RequestHandler: (req: Request, res: Response, next: NextFunction) =&gt; void
• ErrorRequestHandler: (err: any, req: Request, res: Response, next: NextFunction) =&gt; void</p>
<p class="md-github">Skipping handlers
• next(): pass to next handler in stack
• next('route'): skip remaining handlers of current route, jump to next route matching same path and method
• next('router'): exit current router instance, continue in parent stack</p>
<p class="md-github">Built-in middleware
• static: express.static(root: string, options?: ServeStaticOptions) =&gt; RequestHandler
options keys: dotfiles 'ignore'|'allow'|'deny'; etag boolean; extensions string[]; index string|string[]; maxAge number|string; redirect boolean; setHeaders Function
• json: express.json(options?: { inflate?:boolean; limit?:number|string; reviver?:Function; strict?:boolean; type?:string|Function; verify?:Function }) =&gt; RequestHandler
• urlencoded: express.urlencoded(options?: { extended?:boolean; inflate?:boolean; limit?:number|string; parameterLimit?:number; type?:string|Function; verify?:Function }) =&gt; RequestHandler</p>
<p class="md-github">Third-party
• cookie-parser: require('cookie-parser'); app.use(cookieParser(secret?: string, options?: cookieParser.CookieParseOptions))</p>
<p class="md-github">Examples
Reusing middleware array:
function logOriginalUrl(req,res,next){next()}
const logStuff=[logOriginalUrl,logMethod]
app.get('/user/:id',logStuff,(req,res)=&gt;res.send('User Info'))</p>
<p class="md-github">Error handler registration:
app.use((err,req,res,next)=&gt;{res.status(500).send('Something broke!')})</p>
<p class="md-github">Troubleshooting
Command: npm ls express middleware
Output: locate duplicate express versions and conflicting middleware
Check hanging requests by inserting console.log before next()
Enable debug: DEBUG=express:* node app.js
Use reverse proxy cache for static assets performance</p>
<h2 class="md-github"><a class="md-github__anchor" name="information-dense-extract" href="#information-dense-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Information Dense Extract</h2>
<p class="md-github">Middleware signature(req,res,next)void; app.use([path],…handlers) registers application middleware; app.METHOD(path,…handlers) registers route handlers; router.use and router.METHOD for router-level; next() yields to next handler; next('route') skips to next route; next('router') exits router; error handlers signature(err,req,res,next)void must have 4 args; express.static(root,options) serves files; express.json(options) parses JSON; express.urlencoded(options) parses URL-encoded; install third-party via npm and app.use(parser()); static options:maxAge,etag,extensions,index; urlencoded option extended; register parsers before routes; place error handler last; use absolute paths for static; always call next or end response.</p>
<h2 class="md-github"><a class="md-github__anchor" name="sanitised-extract" href="#sanitised-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sanitised Extract</h2>
<p class="md-github">Table of Contents</p>
<ol class="md-github">
<li class="md-github">
<p class="md-github">Middleware function signature</p>
</li>
<li class="md-github">
<p class="md-github">Types of middleware</p>
</li>
<li class="md-github">
<p class="md-github">Application-level registration</p>
</li>
<li class="md-github">
<p class="md-github">Router-level registration</p>
</li>
<li class="md-github">
<p class="md-github">Skipping handlers: next('route') and next('router')</p>
</li>
<li class="md-github">
<p class="md-github">Error-handling middleware</p>
</li>
<li class="md-github">
<p class="md-github">Built-in middleware functions</p>
</li>
<li class="md-github">
<p class="md-github">Third-party middleware loading</p>
</li>
<li class="md-github">
<p class="md-github">Middleware function signature
(req, res, next) =&gt; void  Access req, res; call next() unless ending response</p>
</li>
<li class="md-github">
<p class="md-github">Types of middleware
Application-level
Router-level
Error-handling
Built-in
Third-party</p>
</li>
<li class="md-github">
<p class="md-github">Application-level registration
app.use([mountPath], handler1, handler2, ...)
app.METHOD(mountPath, handler1, handler2, ...)
Handlers execute in order; omit mountPath for all requests</p>
</li>
<li class="md-github">
<p class="md-github">Router-level registration
const router = express.Router()
router.use([mountPath], handler...)
router.METHOD(mountPath, handler...)
app.use(basePath, router)</p>
</li>
<li class="md-github">
<p class="md-github">Skipping handlers
In METHOD handlers use next('route') to skip remaining in-stack handlers and jump to next route definition
In router middleware use next('router') to exit router and continue in parent app stack</p>
</li>
<li class="md-github">
<p class="md-github">Error-handling middleware
Signature: (err, req, res, next) =&gt; void
Must specify four parameters to be recognized
Place after all other middleware and routes</p>
</li>
<li class="md-github">
<p class="md-github">Built-in middleware functions
express.static(root, [options])
express.json([options])
express.urlencoded([options])
Mount via app.use()</p>
</li>
<li class="md-github">
<p class="md-github">Third-party middleware loading
Install: npm install module-name
Load: const mod = require('module-name')
Register: app.use(mod([options]))</p>
</li>
</ol>
<h2 class="md-github"><a class="md-github__anchor" name="original-source" href="#original-source"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Original Source</h2>
<p class="md-github">Node.js Runtime and Express Framework Documentation
https://expressjs.com/en/guide/using-middleware.html</p>
<h2 class="md-github"><a class="md-github__anchor" name="digest-of-express_middleware" href="#digest-of-express_middleware"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Digest of EXPRESS_MIDDLEWARE</h2>
<h1 class="md-github"><a class="md-github__anchor" name="application-level-middleware" href="#application-level-middleware"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Application-level middleware</h1>
<p class="md-github">Bind application-level middleware to an app instance using app.use() or app.METHOD(). METHOD is an HTTP verb in lowercase (get, post, put, delete, etc.). Middleware signature: (req, res, next) =&gt; void. Handlers execute in registration order and must call next() or end the response.</p>
<p class="md-github">Example: No mount path, executed for every request:</p>
<p class="md-github">const express = require('express')
const app = express()</p>
<p class="md-github">app.use((req, res, next) =&gt; {
console.log('Time:', Date.now())
next()
})</p>
<p class="md-github">Example: Mounted on /user/:id, executes for any HTTP method on that path:</p>
<p class="md-github">app.use('/user/:id', (req, res, next) =&gt; {
console.log('Request Type:', req.method)
next()
})</p>
<p class="md-github">Example: Route handler for GET /user/:id:</p>
<p class="md-github">app.get('/user/:id', (req, res, next) =&gt; {
res.send('USER')
})</p>
<p class="md-github">Sub-stack at mount point /user/:id:</p>
<p class="md-github">app.use('/user/:id',
(req, res, next) =&gt; {
console.log('Request URL:', req.originalUrl)
next()
},
(req, res, next) =&gt; {
console.log('Request Type:', req.method)
next()
}
)</p>
<p class="md-github">Example: Multiple GET handlers for /user/:id; first ends cycle, second never called:</p>
<p class="md-github">app.get('/user/:id', (req, res, next) =&gt; {
console.log('ID:', req.params.id)
next()
}, (req, res, next) =&gt; {
res.send('User Info')
})</p>
<p class="md-github">app.get('/user/:id', (req, res, next) =&gt; {
res.send(req.params.id)
})</p>
<p class="md-github">Skip remaining middleware in a route stack: call next('route') within a handler loaded via app.METHOD or router.METHOD:</p>
<p class="md-github">app.get('/user/:id', (req, res, next) =&gt; {
if (req.params.id === '0') next('route')
else next()
}, (req, res) =&gt; {
res.send('regular')
})</p>
<p class="md-github">app.get('/user/:id', (req, res) =&gt; {
res.send('special')
})</p>
<p class="md-github">Declare reusable middleware as array:</p>
<p class="md-github">function logOriginalUrl(req, res, next) {
console.log('Request URL:', req.originalUrl)
next()
}</p>
<p class="md-github">function logMethod(req, res, next) {
console.log('Request Type:', req.method)
next()
}</p>
<p class="md-github">const logStuff = [logOriginalUrl, logMethod]
app.get('/user/:id', logStuff, (req, res) =&gt; {
res.send('User Info')
})</p>
<h1 class="md-github"><a class="md-github__anchor" name="router-level-middleware" href="#router-level-middleware"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Router-level middleware</h1>
<p class="md-github">Use express.Router() to create a router instance. Register middleware with router.use() or router.METHOD(). Mount router on an app path.</p>
<p class="md-github">const express = require('express')
const app = express()
const router = express.Router()</p>
<p class="md-github">router.use((req, res, next) =&gt; {
console.log('Time:', Date.now())
next()
})</p>
<p class="md-github">router.use('/user/:id', (req, res, next) =&gt; {
console.log('Request URL:', req.originalUrl)
next()
}, (req, res, next) =&gt; {
console.log('Request Type:', req.method)
next()
})</p>
<p class="md-github">router.get('/user/:id', (req, res, next) =&gt; {
if (req.params.id === '0') next('route')
else next()
}, (req, res) =&gt; {
res.render('regular')
})</p>
<p class="md-github">router.get('/user/:id', (req, res) =&gt; {
console.log(req.params.id)
res.render('special')
})</p>
<p class="md-github">app.use('/', router)</p>
<p class="md-github">Skip out of router stack: call next('router'):</p>
<p class="md-github">router.use((req, res, next) =&gt; {
if (!req.headers['x-auth']) return next('router')
next()
})</p>
<p class="md-github">router.get('/user/:id', (req, res) =&gt; {
res.send('hello, user!')
})</p>
<p class="md-github">app.use('/admin', router, (req, res) =&gt; {
res.sendStatus(401)
})</p>
<h1 class="md-github"><a class="md-github__anchor" name="error-handling-middleware" href="#error-handling-middleware"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error-handling middleware</h1>
<p class="md-github">Signature: (err, req, res, next) =&gt; void. Must have four arguments to be recognized as error handler.</p>
<p class="md-github">app.use((err, req, res, next) =&gt; {
console.error(err.stack)
res.status(500).send('Something broke!')
})</p>
<h1 class="md-github"><a class="md-github__anchor" name="built-in-middleware" href="#built-in-middleware"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Built-in middleware</h1>
<p class="md-github">express.static serves static assets.
Signature: express.static(root, [options])</p>
<p class="md-github">express.json parses JSON payloads.
Signature: express.json([options])
Note: Available with Express 4.16.0+</p>
<p class="md-github">express.urlencoded parses URL-encoded payloads.
Signature: express.urlencoded([options])
Note: Available with Express 4.16.0+</p>
<h1 class="md-github"><a class="md-github__anchor" name="third-party-middleware" href="#third-party-middleware"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Third-party middleware</h1>
<p class="md-github">Install via npm and load at application or router level.</p>
<p class="md-github">Example: cookie-parser</p>
<p class="md-github">$ npm install cookie-parser</p>
<p class="md-github">const express = require('express')
const app = express()
const cookieParser = require('cookie-parser')</p>
<p class="md-github">app.use(cookieParser())</p>
<h2 class="md-github"><a class="md-github__anchor" name="attribution" href="#attribution"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Attribution</h2>
<ul class="md-github">
<li class="md-github">Source: Node.js Runtime and Express Framework Documentation</li>
<li class="md-github">URL: https://expressjs.com/en/guide/using-middleware.html</li>
<li class="md-github">License: License: MIT</li>
<li class="md-github">Crawl Date: 2025-05-02T20:08:39.990Z</li>
<li class="md-github">Data Size: 8798000 bytes</li>
<li class="md-github">Links Found: 21021</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="retrieved" href="#retrieved"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Retrieved</h2>
<p class="md-github">2025-05-02</p>

  </section>
  <footer>
    <p>Generated on 2025-10-18T07:45:21.392Z</p>
  </footer>
</body>
</html>